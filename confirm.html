<!DOCTYPE html>
<html lang="en" class="mdl-js">

<head>
    <meta charset="utf-8">
    <meta name="author" content="Biihappy">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Kiến Văn &amp; Việt Hoài - Xác nhận tham dự</title>
    <meta name="description"
        content="Để có thể xác nhận tham dự, bạn phải là người nhận được thiệp mời từ cô dâu và chú rể. Hãy nhập vào tên của bạn và tìm kiếm thiệp mời theo form bên dưới.">
    <meta name="keywords"
        content="Wedding,Hoàng Kiến Văn,Ngô Việt Hoài,Wedding website, Website đám cưới, Tạo website đám cưới miễn phí">
    <meta property="og:site_name" content="Hoàng Kiến Văn &amp; Ngô Việt Hoài Wedding site!">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Kiến Văn &amp; Việt Hoài - Xác nhận tham dự">
    <meta property="og:url" content="https://preview.iwedding.info/rsvp">
    <meta property="og:description"
        content="Để có thể xác nhận tham dự, bạn phải là người nhận được thiệp mời từ cô dâu và chú rể. Hãy nhập vào tên của bạn và tìm kiếm thiệp mời theo form bên dưới.">
    <meta property="og:image"
        content="https://cdn.biihappy.com/ziiweb/website/61990349db8f76231c132068/88b6d6c5cb36ccd3725c92f0e0b3d89b.jpeg">
    <meta property="og:image:url"
        content="https://cdn.biihappy.com/ziiweb/website/61990349db8f76231c132068/88b6d6c5cb36ccd3725c92f0e0b3d89b.jpeg">
    <meta property="og:image:secure_url"
        content="https://cdn.biihappy.com/ziiweb/website/61990349db8f76231c132068/88b6d6c5cb36ccd3725c92f0e0b3d89b.jpeg">
    <link rel="shortcut icon" type="image/x-icon" href="https://preview.iwedding.info/rsvp-template/favicon.ico">
    <link
        href="https://fonts.googleapis.com/css2?family=Coiny&amp;family=Jura:wght@300&amp;family=MonteCarlo&amp;family=Tourney:wght@100&amp;display=swap"
        rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <style>
        .container {
            max-width: 650px;
        }

        #search-form h1 {
            font-family: 'Jura', sans-serif;
            font-size: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin: 0;
        }

        #search-form h1 span {
            padding: 0 15px;
        }

        @media only screen and (max-width: 410px) {
            #search-form h1 {
                font-size: 30px !important;
            }
        }

        @media only screen and (max-width: 374px) {
            #search-form h1 {
                font-size: 22px !important;
            }
        }
    </style>
    <script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script>
    <script type="text/javascript" async=""
        src="https://www.googletagmanager.com/gtag/js?id=UA-136239187-4&amp;l=dataLayer&amp;cx=c"></script>
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-K9L0ZFE1PJ"></script>
    <script>window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-K9L0ZFE1PJ');</script>
</head>

<body cz-shortcut-listen="true">
    <main class="container my-3 my-md-5">
        <div class="text-center">
            <img style="max-width:350px;" class="w-100 border border-danger p-1 mb-5 border-2 rounded-circle"
                src="https://cdn.biihappy.com/ziiweb/website/61990349db8f76231c132068/88b6d6c5cb36ccd3725c92f0e0b3d89b.jpeg">
        </div>
        <div>
            <form id="search-form" method="post" novalidate="novalidate">
                <h2 class="text-center fs-1" style="font-family: 'Coiny', cursive;">Xác nhận tham dự</h2>
                <p class="text-center" style="font-family: 'Jura', sans-serif;font-size: 22px;">Đám cưới của</p>
                <div class="d-flex flex-wrap align-items-center justify-content-center">
                    <h1><span>Kiến Văn</span> <img height="50" src="https://preview.iwedding.info/album/heart.gif">
                        <span>Việt Hoài</span></h1>
                </div>
                <p class="lead text-center mt-4" style="font-family: 'Jura', sans-serif;">Để có thể xác nhận tham dự,
                    bạn phải là người nhận được thiệp mời từ cô dâu và chú rể. Hãy nhập vào tên của bạn và tìm kiếm
                    thiệp mời theo form bên dưới.</p>
                <div class="form-floating">
                    <input type="text" name="name" class="form-control" placeholder="Nhập tên của bạn / Type your name">
                    <label for="floatingInput">Nhập tên của bạn / Type your name</label>
                </div>
                <div class="errors mt-1 text-danger"></div>
                <input type="hidden" value="61990349db8f76231c132068" name="website_id">
                <button type="submit" class="btn btn-lg btn-danger text-center w-100 mt-3"
                    style="font-family: 'Jura', sans-serif;">Tìm kiếm thiệp mời của bạn <br><small>Find Your
                        Invitation</small></button>
            </form>
        </div>
        <div class="mt-3 search-response-success d-none" style="font-family: 'Jura', sans-serif;">
            <form id="confirmation-form" method="post">
                <p class="fw-bold text-center fs-6">Tìm thấy bạn trong danh sách khách mời. Vui lòng chọn đúng tên của
                    bạn để tiếp tục.</p>
                <div class="list-guest-container"></div>
            </form>
        </div>

        <div class="mt-3 search-response-error d-none" style="font-family: 'Jura', sans-serif;">
            <p class="fw-bold text-center fs-6 text-danger"></p>
        </div>
        <div>
            <div class="row gx-3 mt-3">
                <div class="col col-12 col-sm-6 mb-3"><a
                        class="btn btn-lg btn-outline-dark w-100 border border-2 border-secondary"
                        href="/index.html">Xem website</a></div>
                <div class="col col-12 col-sm-6 mb-3"><a
                        class="btn btn-lg btn-outline-dark w-100 border border-2 border-secondary"
                        href="/photo-album.html">Xem album cưới</a></div>
            </div>
        </div>
    </main>

    <script>
        var webroot = 'https://preview.iwedding.info';
        if ($("#search-form").length) {
            $("#search-form").validate({
                errorLabelContainer: $("#search-form div.errors"),
                rules: {
                    name: {
                        required: true,
                    },
                },
                messages: {
                    name: {
                        required: 'Vui lòng nhập tên của bạn.',
                    }
                },
                submitHandler: function (form) {
                    $("#search-form").find('button[type="submit"').attr('disabled', 'disabled');
                    $.ajax({
                        type: "GET",
                        url: "https://preview.iwedding.info/search-guests",
                        cache: false,
                        contentType: false,
                        processData: false,
                        data: $(form).serialize(),
                        success: function (res) {
                            if (!res.error) {
                                let data = res.data;
                                let html = '';
                                data.forEach((element) => {
                                    html += `<div class="p-3 border mb-2 rounded position-relative"><div class="form-check">
                                                <input class="form-check-input" type="radio" data-website-id="${element.website_id.$oid}" name="guestID" id="${element._id.$oid}" value="${element._id.$oid}">
                                                <label class="form-check-label fw-semibold" for="${element._id.$oid}">${element.name}</label>
                                            </div><label class="position-absolute w-100 h-100 top-0 start-0" role="button" for="${element._id.$oid}"></label></div>`;
                                });
                                html += ` <button type="submit" class="mt-2 btn btn-dark search-id disabled w-100 btn-lg">Xem thiệp mời và xác nhận</button>`;
                                $('.list-guest-container').html(html);
                                $('.search-response-success').removeClass('d-none');
                                $('.search-response-error').addClass('d-none');
                            } else {
                                $('.search-response-error p').html(res.message);
                                $('.search-response-error').removeClass('d-none');
                                $('.search-response-success').addClass('d-none');
                            }
                        },
                        complete: function () {
                            $("#search-form").find('button[type="submit"').removeAttr('disabled');
                        }
                    });
                    return false;
                }
            });
        }

        $(document).on('click', '.form-check-input', function (event) {
            if ($('.search-id').hasClass('disabled')) {
                $('.search-id').removeClass('disabled');
            }
        });

        $(document).on('submit', '#confirmation-form', function (event) {
            event.preventDefault();
            var guestID = $(this).find('input[name="guestID"]:checked').val();
            window.location.href = webroot + '/invitation/' + guestID;
            return false;
        });

        $(window).on('load', function (event) {
            event.preventDefault();
        });
    </script>
</body>

</html>
